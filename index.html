<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mustache.js/3.0.0/mustache.js"></script>
  </head>
  <body>
    <div class="goods"></div>
    <script>
      let cart = {
        goods: [
          { name: "Хлеб", price: 30, deff: false },
          { name: "Молоко", price: 50, deff: false },
          { name: "Яйца", price: 70, deff: false },
          { name: "Бананы", price: 95, deff: false },
          { name: "Сахар", price: 75, deff: true },
        ],
      };

      let cartTemplate = `<table border="1">
      {{#goods}}
      <tr>
      <td>{{name}}</td>
      <td>{{price}}руб.</td>
      	{{#deff}}осталось мало!{{/deff}}
      	{{^deff}}есть в наличии{{/deff}}
      </td>
      </tr>
      {{/goods}}
      </table>`;

      async function loadPart(name) {
        let path = `/use_mustache/views/${name}.mustache`;
        let responce = await fetch(path);
        let text = await responce.text();
        return text;
      }

      //let tpl= loadPart("goods");
      //console.log(tpl)

      document.querySelector(".goods").innerHTML = Mustache.render(
        cartTemplate,
        cart
      );
    </script>
  </body>
</html>
